"use strict";(()=>{Object.hasOwn||Object.defineProperty(Object,"hasOwn",{value:function(n,e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(n),e)},configurable:!0,enumerable:!1,writable:!0});var le=()=>{},Re=n=>n.length===0,Ht=String.fromCharCode;var{from:Wt,isArray:Ze,of:Vt}=Array,{isInteger:$t,MAX_VALUE:Oe,NEGATIVE_INFINITY:Bt,POSITIVE_INFINITY:ce}=Number,{assign:Qe,defineProperty:wt,entries:xt,fromEntries:At,keys:et,getPrototypeOf:tt,values:rt}=Object,nt=Date.now,{iterator:St,toStringTag:vt}=Symbol;var ue=(n,e=-Oe,t=Oe)=>n<e?e:n>t?t:n,A=(n,e)=>(n%e+e)%e;var U=(n,e)=>n<e?n:e,v=(n,e)=>n>e?n:e;var I=n=>{let e=n.length,t=n[0]?.length??0;return[e,t]},je=n=>{let[e,t]=I(n),r=[];for(let o=0;o<t;o++)r[o]=[];for(let o=0;o<e;o++)for(let s=0;s<t;s++)r[s][o]=n[o][s];return r},te=(n,e,t,...r)=>{let[o,s]=I(n);return t??=v(o-e,0),n.splice(e,t,...r)},re=(n,e,t,...r)=>{let[o,s]=I(n),i=r.length>0?je(r):Array(o).fill([]);return t??=v(s-e,0),je(n.map((l,p)=>l.splice(e,t,...i[p])))},Ge=(n,e)=>{let[t,r]=I(n);if(e=A(e,t===0?1:t),e===0)return n;let o=te(n,t-e,e);return te(n,0,0,...o),n},Ne=(n,e)=>{let[t,r]=I(n);if(e=A(e,r===0?1:r),e===0)return n;let o=re(n,r-e,e);return re(n,0,0,...o),n};var ne=n=>tt(n).constructor,q=(n,...e)=>new(ne(n))(...e),oe=n=>n.prototype;var N=(n,e,...t)=>r=>n[e].bind(r,...t);var V=(n,e,...t)=>n[e].bind(n,...t),Fe=oe(Array),he=oe(Map),pe=oe(Set);var de=N(Fe,"pop"),se=N(Fe,"push");var me=N(Fe,"splice",0);var $=N(pe,"add"),fe=N(pe,"clear"),B=N(pe,"delete");var Y=N(pe,"has");var _e=N(he,"clear"),X=N(he,"delete");var k=N(he,"get");var z=N(he,"set");var Mt,Le=class{constructor(e){Object.defineProperty(this,"length",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"front",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"back",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"count",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.items=Array(e),this.back=e-1}pushBack(...e){for(let t of e)this.count===this.length&&this.popFront(),this.items[this.back]=t,this.back=A(this.back-1,this.length),this.count++}pushFront(...e){for(let t of e)this.count===this.length&&this.popBack(),this.items[this.front]=t,this.front=A(this.front+1,this.length),this.count++}getBack(){if(this.count!==0)return this.items[A(this.back+1,this.length)]}getFront(){if(this.count!==0)return this.items[A(this.front-1,this.length)]}popBack(){if(this.count===0)return;this.back=A(this.back+1,this.length);let e=this.items[this.back];return this.items[this.back]=void 0,this.count--,e}popFront(){if(this.count===0)return;this.front=A(this.front-1,this.length);let e=this.items[this.front];return this.items[this.front]=void 0,this.count--,e}rotate(e){let{front:t,back:r,length:o,count:s,items:i}=this;if(s!==0){if(e=A(e,s),s<o)for(let l=0;l<e;l++){let p=A(r-l,o),m=A(t-l-1,o);i[p]=i[m],i[m]=void 0}this.front=A(t-e,o),this.back=A(r-e,o)}}reverse(){let e=this.count/2|0,{length:t,front:r,back:o,items:s}=this;for(let i=1;i<=e;i++){let l=A(o+i,t),p=A(r-i,t),m=s[l];s[l]=s[p],s[p]=m}}resolveIndex(e){return A(this.back+e+1,this.length)}at(e){return this.items[this.resolveIndex(e)]}replace(e,t){this.items[A(this.back+e+1,this.count)]=t}insert(e,t){this.count===this.length&&this.popFront();let r=this.resolveIndex(e);for(let o=this.front;o>r;o--)this.items[o]=this.items[o-1];this.items[r]=t,this.count++}};Mt=Le;var ie=Symbol("a rejection by a throttled function");var ge=(n,e)=>{let t=0;return(...r)=>{let o=nt();return o-t>n?(t=o,e(...r)):ie}};var K=n=>{let e=n.length,t=new(ne(n))(e+1).fill(0);for(let r=0;r<e;r++)t[r+1]=t[r]+n[r];return t};var F;(function(n){n[n.LOG=0]="LOG"})(F||(F={}));var Pe=(n,e)=>n===e,ze=(n,e)=>!1,Ue=n=>n===!1?ze:n??Pe,ke=(n,e)=>{let t=Ue(e),r=ge(n,t);return(o,s)=>{let i=r(o,s);return i===ie?!0:i}},st=n=>{let e=n.length**.5;return n.reduce((t,r)=>t+r*(r+e),0)};var it=F.LOG?(n,e,t)=>{let r=n(e),o=t?n(t):{name:"untracked"};console.log("GET:	",r.name,"	by OBSERVER:	",o.name,"	with VALUE	",r.value)}:le;var E;(function(n){n[n.ABORTED=-1]="ABORTED",n[n.UNCHANGED=0]="UNCHANGED",n[n.UPDATED=1]="UPDATED"})(E||(E={}));var H=n=>{let{newId:e,getId:t,setId:r,addEdge:o}=n;return class{constructor(i,{name:l,equals:p}={}){let m=e();r(m,this),this.id=m,this.rid=m,this.name=l,this.value=i,this.equals=Ue(p)}get(i){return i&&o(this.id,i),F.LOG&&it(t,this.id,i),this.value}set(i){let l=this.value;return!this.equals(l,this.value=typeof i=="function"?i(l):i)}run(i){return i?E.UPDATED:E.UNCHANGED}bindMethod(i){return V(this,i)}static create(...i){let l=new this(...i);return[l.id,l]}}},be=n=>{let e=n.runId;return class extends n.getClass(H){constructor(r,o){super(r,o)}set(r){return super.set(r)?(e(this.id),!0):!1}static create(r,o){let s=new this(r,o);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}},ye=n=>class extends n.getClass(H){constructor(t,r){super(r?.value,r),this.fn=t,r?.defer===!1&&this.get()}get(t){return this.rid&&(this.run(),this.rid=0),super.get(t)}run(t){return super.set(this.fn(this.rid))?E.UPDATED:E.UNCHANGED}static create(t,r){let o=new this(t,r);return[o.id,o.bindMethod("get")]}},we=n=>class extends n.getClass(H){constructor(t,r){super(r?.value,r),this.fn=t,this.dirty=1,r?.defer===!1&&this.get()}run(t){return this.dirty=1}get(t){return(this.rid||this.dirty)&&(super.set(this.fn(this.rid)),this.dirty=0,this.rid=0),super.get(t)}static create(t,r){let o=new this(t,r);return[o.id,o.bindMethod("get")]}},xe=n=>{let e=n.runId;return class extends n.getClass(H){constructor(r,o){super(void 0,o),this.fn=r,o?.defer===!1&&this.set()}get(r){r&&(this.rid&&this.run(),super.get(r))}set(){return e(this.id)}run(r){let o=this.fn(this.rid)!==!1;return this.rid&&(this.rid=0),o?E.UPDATED:E.UNCHANGED}static create(r,o){let s=new this(r,o);return[s.id,s.bindMethod("get"),s.bindMethod("set")]}}};var J=class{addEdge;delEdge;newId;getId;setId;delId;runId;swapId;clearCache;addClass;getClass;batch;dynamic;constructor(){let e=0,t=0,r=new Map,o=new Map,s=k(r),i=k(o),l=z(r),p=z(o),m=X(r),c=X(o),_=new Map,f=k(_),x=z(_),h=_e(_),a=u=>{let d=new Set,w=$(d),S=Y(d),O=P=>{S(P)||(s(P)?.forEach(O),w(P))};return u.forEach(O),u.forEach(B(d)),[...d,...u].reverse()},b=(...u)=>{let d=st(u);return f(d)??(x(d,a(u))&&f(d))},y=new Map,g=k(y),M=z(y),T=X(y),C=new Set,R=$(C),j=B(C),G=fe(C),Q=new Set,Me=$(Q),Ce=Y(Q),Ee=fe(Q),W=new Map,ae=z(W),Te=_e(W),ee=[],Ie=se(ee),De=de(ee),Be=(...u)=>{G(),Ee(),F.LOG,u.forEach(R);let d=u.length,w=b(...u);for(let O of w){if(j(O)&&!Ce(O)){let P=mt(O,d-- >0);P!==E.UNCHANGED&&s(O)?.forEach(P>=E.UPDATED?R:Me),F.LOG&&ae(O,P)}if(C.size<=0)break}F.LOG&&console.log("topological visiting ordering: ",[...W].map(([O,P])=>[g(O).name,P])),F.LOG&&console.log("UPDATE_POSTRUNS:	",ee);let S;for(;S=De();)g(S)?.postrun()},mt=(u,d)=>{let w=d===!0,S=g(u),O=S?.run(w)??E.UNCHANGED;return O>=E.UPDATED&&S.postrun&&Ie(u),O},Ye=[],ft=se(Ye),_t=me(Ye),Xe=()=>++t,Ke=()=>{--t<=0&&(t=0,Be(..._t()))},gt=(u,...d)=>{Xe();let w=u(...d);return Ke(),w};this.addEdge=(u,d)=>{if(u+d<=0)return!1;let w=s(u)??(l(u,new Set)&&s(u));return w.has(d)?!1:(w.add(d),i(d)?.add(u)||p(d,new Set([u])),h(),!0)},this.delEdge=(u,d)=>s(u)?.delete(d)&&i(d)?.delete(u)?(h(),!0):!1,this.newId=()=>(h(),++e),this.getId=g,this.setId=M,this.delId=u=>{if(T(u)){let d=s(u),w=i(u);return d?.forEach(S=>{i(S)?.delete(u)}),w?.forEach(S=>{s(S)?.delete(u)}),d?.clear(),w?.clear(),m(u),c(u),h(),!0}return!1},this.swapId=(u,d)=>{let w=g(u),S=g(d);M(u,S),M(d,w),w&&(w.id=d,w.rid&&(w.rid=d)),S&&(S.id=u,S.rid&&(S.rid=u)),h()},this.clearCache=h,this.runId=u=>t<=0?(Be(u),!0):(ft(u),!1);let Je=new Map,bt=k(Je),yt=z(Je);this.addClass=u=>{let d=this.getClass(u);return V(d,"create")},this.getClass=u=>{let d=bt(u);return d||(d=u(this),yt(u,d),d)},this.batch={startBatching:Xe,endBatching:Ke,scopedBatching:gt},this.dynamic={setValue:(u,d)=>{let w=g(u??0);w&&(w.value=d)},setEquals:(u,d)=>{let w=g(u??0);w&&(w.equals=d)},setFn:(u,d)=>{let w=g(u??0);w&&(w.fn=d)}}}};var at=Number.isFinite,{abs:qe,cos:lt,max:He,sin:ct,random:Rt}=Math;var Ot=n=>{let e=n.length,t=()=>Rt()*e|0,r=(o,s)=>{let i=n[o];n[o]=n[s],n[s]=i};for(let o=0;o<e;o++)r(o,t());return n},We=(n,e,t)=>{let r=typeof t=="function"?()=>Array(e).fill(void 0).map(t):()=>Array(e).fill(t);return Array(n).fill(void 0).map(r)},ut=function*(n){let e=n.length;for(;!Re(n);)e>=n.length&&(e=0,Ot(n)),e=v(e+((yield n[e])??1),0)};var Ae=(n,e=!1)=>(typeof n=="string"&&(n=n==="start"?0:n==="end"?1:.5),e?1-n:n),Ve=(n,e=!1)=>(n=Array.isArray(n)?n:[n],n.map(t=>Ae(t,e))),qn=n=>{let e=K(n);return e.pop(),e},$e=(n,e,t)=>{if(!t)return{width:n,height:e};let r=qe(lt(t)),o=qe(ct(t));return{width:n*r+e*o,height:n*o+e*r}},jt=n=>{let e={px:0,pw:0,ph:0};for(let t of n.split("+")){let r=t.trim(),o=+r.slice(0,-2),s=r.slice(-2);e[s]+=o}return e},Z=n=>{if(typeof n=="object")return n;let e=Number(n);return at(e)?{px:e}:jt(n)},Gt=["px","pw","ph"],Hn=n=>{let e=Z(n);return Gt.map(t=>String(e[t]??0)+t).join(" + ")};var ve=new J,Nt=ve.addClass(be),Ft=ve.addClass(ye),Lt=ve.addClass(we),Yn=ve.addClass(xe),ht=(...n)=>Nt(...n).splice(1),D=(...n)=>Ft(...n)[1],Pt=(...n)=>Lt(...n)[1],L=n=>typeof n=="function"?[n,void 0]:ht(n),Se=class{comp;isDirty;setDirty;paused=!1;pauseReactivity(){this.paused=!0}resumeReactivity(){this.paused=!1}constructor(e){let[t,r]=ht(void 0,{equals:()=>this.paused});this.comp=e?Pt:D,this.isDirty=t,this.setDirty=r}};var pt=class extends Se{cols;rows;originAlign;colWidth;rowHeight;colMinWidth;rowMinHeight;colMaxWidth;rowMaxHeight;colAlign;rowAlign;colGap;rowGap;cells;getColWidths=this.comp(e=>{this.isDirty(e);let{cols:t,colWidth:r,colMinWidth:o,colMaxWidth:s}=this,i=r.length,l=o.length,p=s.length,m=Array(t).fill(0);for(let c=0;c<t;c++){let _=r[c%i],f=o[c%l],x=s[c%p];m[c]=He(...this.getCol(c).map(h=>{let{width:a,height:b=0,rotation:y}=h,g=a!==void 0?$e(a,b,y).width:_;return ue(g,f,x)}))}return m},{equals:!1});getRowHeights=this.comp(e=>{this.isDirty(e);let{rows:t,rowHeight:r,rowMinHeight:o,rowMaxHeight:s}=this,i=r.length,l=o.length,p=s.length,m=Array(t).fill(0);for(let c=0;c<t;c++){let _=r[c%i],f=o[c%l],x=s[c%p];m[c]=He(...this.getRow(c).map(h=>{let{width:a=0,height:b,rotation:y}=h,g=b!==void 0?$e(a,b,y).height:_;return ue(g,f,x)}))}return m},{equals:!1});get_left_positions=this.comp(e=>{let t=this.getColWidths(e),r=this.colGap,o=r.length,s=t.map((i,l)=>i+r[l%o]);return K(s)},{equals:!1});get_top_positions=this.comp(e=>{let t=this.getRowHeights(e),r=this.rowGap,o=r.length,s=t.map((i,l)=>i+r[l%o]);return K(s)},{equals:!1});get_topleft_aligned_cell_frames=this.comp(e=>{let t=this.getColWidths(e),r=this.getRowHeights(e),o=this.get_left_positions(e),s=this.get_top_positions(e),{rows:i,cols:l,cells:p,colAlign:m,rowAlign:c}=this,_=m.length,f=c.length,x=We(i,l);for(let h=0;h<i;h++)for(let a=0;a<l;a++){let b=o[a],y=s[h],g=t[a],M=r[h],T=b+g,C=y+M,{width:R=0,height:j=0,rotation:G,anchor:{x:Q,y:Me}={},colAlign:Ce=m[a%_],rowAlign:Ee=c[h%f]}=p[h][a],W=Ae(Ce),ae=Ae(Ee),Te=Q??W,ee=Me??ae,Ie=g*W-R*Te,De=M*ae-j*ee;x[h][a]={left:b,top:y,right:T,bottom:C,x:Ie,y:De,width:R,height:j,rotation:G}}return x},{equals:!1});width=this.comp(e=>this.get_left_positions(e).at(-1),{equals:!1});height=this.comp(e=>this.get_top_positions(e).at(-1),{equals:!1});getCellFrames=this.comp(e=>{let t=this.get_topleft_aligned_cell_frames(e),r=this.width(e),o=this.height(e),{rows:s,cols:i,originAlign:l}=this,p=l.includes("right"),m=l.includes("bottom");if(p||m)for(let c=0;c<s;c++)for(let _=0;_<i;_++){let f=t[c][_],{top:x,left:h,bottom:a,right:b}=f;p&&(f.right=r-h,f.left=r-b),m&&(f.bottom=o-x,f.top=o-a)}return 0&&console.log("recomputing getCellFrames"),t},{equals:!1});constructor(e,t=!1){super(t);let{rows:r,cols:o,originAlign:s="",colWidth:i=[0],rowHeight:l=[0],colMinWidth:p=[0],rowMinHeight:m=[0],colMaxWidth:c=[ce],rowMaxHeight:_=[ce],colAlign:f=["start"],rowAlign:x=["start"],colGap:h=[0],rowGap:a=[0]}=e,b=We(r,o);for(let y=0;y<r;y++)for(let g=0;g<o;g++)b[y][g]={};Object.assign(this,{rows:r,cols:o,originAlign:s,colWidth:i,rowHeight:l,colGap:h,rowGap:a,colMinWidth:p,rowMinHeight:m,colMaxWidth:c,rowMaxHeight:_,cells:b,colAlign:Ve(f),rowAlign:Ve(x)}),this.getCellFrames()}getCellFrame(e,t){let{rows:r,cols:o,getCellFrames:s}=this;return s()[e%r][t%o]}getRow(e){return this.cells[e]}getCol(e){return this.cells.map(t=>t[e])}getCell(e,t){return this.cells[e][t]}setCell(e,t,r){this.cells[e][t]=r,this.setDirty()}spliceRows(e,t,...r){let{cells:o,setDirty:s}=this,i=te(o,e,t,...r),[l,p]=I(o);return this.rows=l,s(),i}spliceCols(e,t,...r){let{cells:o,setDirty:s}=this,i=re(o,e,t,...r),[l,p]=I(o);return this.cols=p,s(),i}rotateRows(e){let{cells:t,setDirty:r}=this;Ge(t,e),r()}rotateCols(e){let{cells:t,setDirty:r}=this;Ne(t,e),r()}pushRows(...e){let{rows:t,cols:r}=this,[o,s]=I(e),i=t+o;return s!==r?(0&&console.error(`number of columns mismatched. cannot push new rows with ${s} columns onto existing grid with ${r} columns`),t):(this.spliceRows(t,0,...e),0&&console.assert(this.rows===i),i)}pushCols(...e){let{rows:t,cols:r}=this,[o,s]=I(e),i=r+o;return s!==t?(0&&console.error(`number of rows mismatched. cannot push new cols with ${s} rows onto existing grid with ${t} rows`),r):(this.spliceCols(r,0,...e),0&&console.assert(this.cols===i),i)}unshiftRows(...e){let{rows:t,cols:r}=this,[o,s]=I(e),i=t+o;return s!==r?(0&&console.error(`number of columns mismatched. cannot unshift new rows with ${s} columns onto existing grid with ${r} columns`),t):(this.spliceRows(0,0,...e),0&&console.assert(this.rows===i),i)}unshiftCols(...e){let{rows:t,cols:r}=this,[o,s]=I(e),i=r+o;return s!==t?(0&&console.error(`number of rows mismatched. cannot unshift new cols with ${s} rows onto existing grid with ${t} rows`),r):(this.spliceCols(0,0,...e),0&&console.assert(this.cols===i),i)}popRows(e=1){return this.spliceRows(this.rows-e,e)}popCols(e=1){return this.spliceCols(this.cols-e,e)}shiftRows(e=1){return this.spliceRows(0,e)}shiftCols(e=1){return this.spliceCols(0,e)}static fromCells(e,t){let[r,o]=I(e),s=new this({rows:0,cols:o,...t});return s.pushRows(...e),s}hit(e,t){let r=this.originAlign,o=r.includes("right"),s=r.includes("bottom"),i=this.get_left_positions(),l=this.get_top_positions(),p=i.at(-1),m=l.at(-1);if(e=o?p-e:e,t=s?m-t:t,e<0||e>p||t<0||t>m)return;let c=e===0?0:i.findIndex(f=>e<=f)-1;return[t===0?0:l.findIndex(f=>t<=f)-1,c]}toPreview(e,t){}};var zt=["left","top","right","bottom"],Ut=["aqua","aquamarine","antiquewhite","blue","brown","blueviolet","chartreuse","crimson","darkkhaki","darkorange","darksalmon","fuchsia","gold","green","orangered","yellow","yellowgreen"],kt=ut(Ut),dt=class{children=[];constructor(e,t,r,o){let s=[e,t,r,o],i={};for(let l=0;l<4;l++){let p=zt[l],m=s[l],[c,_]=L(m);this[p]=c,i[p]=_}this.set=i}getFreespaceChild(){let{children:e}=this;if(e.length>0)return e[0];let{left:r,top:o,right:s,bottom:i}=this,l=q(this,r,o,s,i);return e.push(l),l}splitChildLeft(e,t={}){t.left??=0,t.right??=0;let r=this.getFreespaceChild(),{left:o,top:s,right:i,bottom:l}=r,[p,m]=L(Z(e)),[c,_]=L({...t,top:0,bottom:0}),f=D(a=>{let{left:b=0,right:y=0}=c(a);return U(o(a)+b,i(a)-y)}),x=D(a=>{let{left:b=0,right:y=0}=c(a),g=o(a)+b,M=v(i(a)-y,g),T=s(a),C=l(a),{px:R=0,pw:j=0,ph:G=0}=p(a);return U(g+R+(M-g)*j+(C-T)*G,M)}),h=q(this,f,s,x,l);return h.margin=c,h.width=p,h.set.margin=_,h.set.width=m,r.left=D(a=>U(x(a)+c(a).right,i(a))),this.children.push(h),h}splitChildTop(e,t={}){t.top??=0,t.bottom??=0;let r=this.getFreespaceChild(),{left:o,top:s,right:i,bottom:l}=r,[p,m]=L(Z(e)),[c,_]=L({...t,left:0,right:0}),f=D(a=>{let{top:b=0,bottom:y=0}=c(a);return U(s(a)+b,l(a)-y)}),x=D(a=>{let{top:b=0,bottom:y=0}=c(),g=o(a),M=i(a),T=s(a)+b,C=v(l(a)-y,T),{px:R=0,pw:j=0,ph:G=0}=p(a);return U(T+R+(M-g)*j+(C-T)*G,C)}),h=q(this,o,f,i,x);return h.margin=c,h.height=p,h.set.margin=_,h.set.height=m,r.top=D(a=>U(x(a)+c(a).bottom,l(a))),this.children.push(h),h}splitChildRight(e,t={}){t.left??=0,t.right??=0;let r=this.getFreespaceChild(),{left:o,top:s,right:i,bottom:l}=r,[p,m]=L(Z(e)),[c,_]=L({...t,top:0,bottom:0}),f=D(a=>{let{left:b=0,right:y=0}=c(a),g=o(a)+b,M=v(i(a)-y,g),T=s(a),C=l(a),{px:R=0,pw:j=0,ph:G=0}=p(a);return v(M-R-(M-g)*j-(C-T)*G,g)}),x=D(a=>{let{left:b=0,right:y=0}=c(a);return v(o(a)+b,i(a)-y)}),h=q(this,f,s,x,l);return h.margin=c,h.width=p,h.set.margin=_,h.set.width=m,r.right=D(a=>v(f(a)+c(a).left,o(a))),this.children.push(h),h}splitChildBottom(e,t={}){t.top??=0,t.bottom??=0;let r=this.getFreespaceChild(),{left:o,top:s,right:i,bottom:l}=r,[p,m]=L(Z(e)),[c,_]=L({...t,left:0,right:0}),f=D(a=>{let{top:b=0,bottom:y=0}=c(a),g=o(a),M=i(a),T=s(a)+b,C=v(l(a)-y,T),{px:R=0,pw:j=0,ph:G=0}=p(a);return v(C-R-(M-g)*j-(C-T)*G,T)}),x=D(a=>{let{top:b=0,bottom:y=0}=c(a);return v(s(a)+b,l(a)-y)}),h=q(this,o,f,i,x);return h.margin=c,h.height=p,h.set.margin=_,h.set.height=m,r.bottom=D(a=>v(f(a)+c(a).top,s(a))),this.children.push(h),h}hit(e,t){if(this.left()<=e&&e<=this.right()&&this.top()<=t&&t<=this.bottom()){let r=this.children,o=r.length,s,i=0;for(;++i<o&&!(s=r[i].hit(e,t)););return s??this}}toString(){let{left:e,top:t,right:r,bottom:o,margin:s,width:i,height:l,set:p,children:m}=this,c=[],_={setters:c,position:[e(),t(),r(),o()]};for(let f in p)p[f]!==void 0&&c.push(f);if(s){let{left:f,top:x,right:h,bottom:a}=s();_.margin=[f,x,h,a]}return i&&(_.width=i()),l&&(_.height=l()),m.length>0&&(_.children=m.map(f=>f.toString())),_}toPreview(e,t){let r=this.children,o=r.length;if(o<=1||t){let{left:s,top:i,right:l,bottom:p}=this,m=s(),c=i(),_=l()-m,f=p()-c;e.fillStyle=t??kt.next().value,e.fillRect(m,c,_,f)}for(let s=0;s<o;s++)r[s].toPreview(e,s===0?t??"gray":void 0)}};})();
